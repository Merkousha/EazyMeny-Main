# User Story 11: سیستم رزرو میز

## شناسه: US-011
**اولویت:** متوسط | **فاز:** 2 | **تخمین:** 4 روز

---

## شرح User Story

**به عنوان یک** مشتری  
**می‌خواهم** میز رستوران را آنلاین رزرو کنم  
**تا بتوانم** از داشتن میز در زمان مورد نظرم مطمئن باشم.

---

## معیارهای پذیرش

### سناریو 1: مشاهده تقویم رزرو
- انتخاب تاریخ از تقویم
- انتخاب تعداد نفرات (1-20)
- نمایش بازه‌های زمانی موجود
- رنگ‌بندی: سبز (خالی), نارنجی (تقریباً پر), قرمز (پر)

### سناریو 2: ثبت رزرو
**فیلدها:**
- تاریخ و زمان
- تعداد نفرات
- نام و شماره تماس
- ایمیل (اختیاری)
- درخواست خاص (جشن تولد، کنار پنجره، ...)

**Then:**
- کد رزرو: #RES-12345
- پیامک تایید
- ایمیل تایید (در صورت وجود)

### سناریو 3: مدیریت رزرو - رستوران
**تقویم رزروها:**
- نمای روزانه/هفتگی/ماهانه
- Drag & Drop برای جابجایی
- رنگ‌بندی بر اساس وضعیت:
  - 🟡 در انتظار تایید
  - 🟢 تایید شده
  - 🔵 حاضر شده
  - 🔴 لغو شده
  - ⚫ عدم حضور (No-show)

### سناریو 4: تایید/رد رزرو
- تایید → پیامک به مشتری
- رد → انتخاب دلیل + پیامک

### سناریو 5: یادآوری رزرو
- 24 ساعت قبل → پیامک یادآوری
- 2 ساعت قبل → پیامک یادآوری

### سناریو 6: لغو رزرو توسط مشتری
- لینک لغو در پیامک
- تا 2 ساعت قبل رایگان
- کمتر از 2 ساعت → جریمه (در صورت پیش‌پرداخت)

---

## API Endpoints

```
GET /api/reservations/availability?date=2025-10-05&guests=4
POST /api/reservations
GET /api/reservations
PUT /api/reservations/{id}/status
DELETE /api/reservations/{id}
```

---

## تنظیمات رزرو

- ظرفیت کل (تعداد میز)
- ظرفیت هر میز
- بازه‌های زمانی (هر 30 دقیقه, 1 ساعت, ...)
- حداقل مدت رزرو
- حداکثر تعداد نفرات
- قوانین کنسلی
- پیش‌پرداخت (فعال/غیرفعال)

---

## تست‌ها
- [x] مشاهده تقویم
- [x] ثبت رزرو
- [x] تایید/رد
- [x] یادآوری خودکار
- [x] لغو رزرو

---

**وضعیت:** ⬜ در انتظار
