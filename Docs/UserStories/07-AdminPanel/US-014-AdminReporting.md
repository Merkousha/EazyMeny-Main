# User Story 14: پنل ادمین - گزارش‌گیری

## شناسه: US-014
**اولویت:** متوسط | **فاز:** 2 | **تخمین:** 3 روز

---

## شرح User Story

**به عنوان یک** ادمین پلتفرم  
**می‌خواهم** گزارش‌های تحلیلی جامع دریافت کنم  
**تا بتوانم** عملکرد پلتفرم را ارزیابی و بهبود دهم.

---

## معیارهای پذیرش

### سناریو 1: گزارش‌های مالی
**گزارش درآمد:**
- درآمد روزانه/هفتگی/ماهانه/سالانه
- تفکیک بر اساس پلن
- نمودار روند درآمد
- مقایسه با دوره قبل
- پیش‌بینی درآمد ماه آینده

**گزارش تراکنش‌ها:**
- تراکنش‌های موفق
- تراکنش‌های ناموفق (با دلیل)
- میانگین ارزش تراکنش
- روش پرداخت (آنلاین/نقدی)

### سناریو 2: گزارش‌های عملکردی
**سفارش‌ها:**
- تعداد سفارش‌های روزانه/ماهانه
- میانگین ارزش سفارش (AOV)
- محبوب‌ترین محصولات (Top 20)
- ساعات پیک سفارش
- نرخ لغو سفارش

**رزروها:**
- تعداد رزروهای ماهانه
- نرخ عدم حضور (No-show Rate)
- محبوب‌ترین روزها و ساعات
- میانگین تعداد نفرات

### سناریو 3: گزارش‌های کاربری
**رشد کاربران:**
- رستوران‌های جدید (هفتگی/ماهانه)
- نرخ تبدیل Trial به Paid
- نرخ فعالیت (Active Users)
- نرخ لغو اشتراک (Churn Rate)
- متوسط طول عمر مشتری (LTV)

**رضایت مشتری:**
- امتیاز رضایت (1-5)
- تعداد شکایات
- زمان پاسخ‌دهی به تیکت‌ها
- نرخ حل مشکل (Resolution Rate)

### سناریو 4: صادرات گزارش
**فرمت‌ها:**
- Excel (.xlsx)
- PDF
- CSV

**ارسال خودکار:**
- گزارش هفتگی به ایمیل
- گزارش ماهانه به ایمیل مدیریت

---

## API Endpoints

```
GET /api/admin/reports/financial?from=2025-09-01&to=2025-10-01
GET /api/admin/reports/orders
GET /api/admin/reports/users
POST /api/admin/reports/export
```

---

## نمودارها

- **Chart.js** برای نمودارها
- نمودار خطی: روند درآمد
- نمودار میله‌ای: مقایسه ماهانه
- نمودار دایره‌ای: توزیع پلن‌ها
- نمودار Heatmap: فعالیت روزانه

---

## تست‌ها
- [x] گزارش مالی
- [x] گزارش عملکردی
- [x] گزارش کاربری
- [x] صادرات Excel/PDF
- [x] ارسال خودکار

---

**وضعیت:** ⬜ در انتظار
