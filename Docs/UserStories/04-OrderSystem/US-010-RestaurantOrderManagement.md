# User Story 10: مدیریت سفارش‌ها - پنل رستوران

## شناسه: US-010
**اولویت:** بالا | **فاز:** MVP | **تخمین:** 3 روز

---

## شرح User Story

**به عنوان یک** مدیر رستوران  
**می‌خواهم** سفارش‌های دریافتی را مشاهده و مدیریت کنم  
**تا بتوانم** به‌موقع سفارش‌ها را آماده و تحویل دهم.

---

## معیارهای پذیرش

### سناریو 1: دریافت سفارش جدید
**When:** مشتری سفارش ثبت می‌کند  
**Then:**
- اعلان صوتی در پنل پخش می‌شود
- Badge قرمز روی منو "سفارش‌ها"
- نوتیفیکیشن داخل پنل
- پیامک به شماره رستوران

### سناریو 2: مشاهده جزئیات سفارش
- کد سفارش: #EZ-12345
- نام مشتری و شماره تماس
- لیست محصولات + گزینه‌ها
- نوع دریافت (دلیوری/حضوری)
- آدرس تحویل (در صورت دلیوری)
- زمان سفارش
- وضعیت پرداخت (پرداخت شده/نقدی)
- توضیحات مشتری

### سناریو 3: تغییر وضعیت سفارش
**مراحل:**
1. **جدید** → کلیک "تایید" → پیامک به مشتری
2. **تایید شده** → کلیک "در حال آماده‌سازی"
3. **در حال آماده‌سازی** → کلیک "آماده تحویل" → پیامک
4. **آماده تحویل** → کلیک "تحویل داده شد"
5. **تحویل داده شد** → ثبت نهایی

### سناریو 4: لغو سفارش
- انتخاب دلیل: موجودی ناکافی, خارج از ساعت کاری, سایر
- وارد کردن توضیحات
- تایید لغو → پیامک به مشتری
- بازگشت وجه (در صورت پرداخت آنلاین)

### سناریو 5: چاپ سفارش
- چاپ فیش آشپزخانه (Kitchen Receipt)
- چاپ فاکتور مشتری
- فرمت حرارتی (Thermal Printer)

### سناریو 6: فیلتر و جستجو
- فیلتر بر اساس: وضعیت, تاریخ, نوع دریافت
- جستجو با: کد سفارش, نام مشتری, شماره تماس
- مرتب‌سازی: جدیدترین, قدیمی‌ترین

---

## API Endpoints

```
GET /api/orders?status=new&page=1
GET /api/orders/{id}
PUT /api/orders/{id}/status
POST /api/orders/{id}/cancel
GET /api/orders/{id}/print
```

---

## Realtime Updates

- استفاده از **SignalR**
- سفارش جدید → Push به تمام کلاینت‌های متصل
- تغییر وضعیت → به‌روزرسانی لحظه‌ای

---

## تست‌ها
- [x] دریافت سفارش
- [x] مشاهده جزئیات
- [x] تغییر وضعیت
- [x] لغو سفارش
- [x] چاپ
- [x] فیلتر و جستجو

---

**وضعیت:** ⬜ در انتظار
